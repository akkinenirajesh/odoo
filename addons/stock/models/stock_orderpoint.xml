xml
<buvi>
  <model id="Stock.WarehouseOrderpoint" name="Stock.WarehouseOrderpoint" description="Minimum Inventory Rule">
    <field name="Name" type="string" label="Name" required="true" copy="false" default="env.Sequence.NextByCode('stock.orderpoint')" readonly="true" />
    <field name="Trigger" type="selection" label="Trigger" required="true" default="Auto">
      <option value="Auto" name="Auto" />
      <option value="Manual" name="Manual" />
    </field>
    <field name="Active" type="bool" label="Active" default="true"
            help="If the active field is set to False, it will allow you to hide the orderpoint without removing it." />
    <field name="SnoozedUntil" type="date" label="Snoozed" help="Hidden until next scheduler." />
    <field name="Warehouse" type="Stock.Warehouse" label="Warehouse" store="true" readonly="false" precompute="true" required="true" ondelete="cascade" />
    <field name="Location" type="Stock.Location" label="Location" index="true" store="true" readonly="false" precompute="true" required="true" ondelete="cascade" />
    <field name="ProductTemplate" type="Product.Template" related="Product.ProductTemplate" />
    <field name="Product" type="Product.Product" label="Product" ondelete="cascade" required="true"
            domain="[('ProductTemplate', '=', context.Get('active_id', false))] if context.Get('active_model') == 'product.template' else [('Id', '=', context.Get('default_product_id', false))] if context.Get('default_product_id') else [('IsStorable', '=', true)]" />
    <field name="ProductCategory" type="Product.Category" name="Product Category" related="Product.CategId" store="true" />
    <field name="ProductUom" type="Uom.Uom" label="Unit of Measure" related="Product.UomId" />
    <field name="ProductUomName" type="string" label="Product unit of measure label" related="ProductUom.DisplayName" readonly="true" />
    <field name="ProductMinQty" type="float" label="Min Quantity" digits="Product Unit of Measure" required="true" default="0.0"
            help="When the virtual stock goes below the Min Quantity specified for this field, Odoo generates a procurement to bring the forecasted quantity above of this Min Quantity." />
    <field name="ProductMaxQty" type="float" label="Max Quantity" digits="Product Unit of Measure" required="true" default="0.0"
            help="When the virtual stock goes below the Min Quantity, Odoo generates a procurement to bring the forecasted quantity up to (or near to) the Max Quantity specified for this field (or to Min Quantity, whichever is bigger)."/>
    <field name="QtyMultiple" type="float" label="Multiple Quantity" digits="Product Unit of Measure" default="1" required="true"
            help="The procurement quantity will be rounded up to a multiple of this field quantity. If it is 0, it is not rounded." />
    <field name="GroupId" type="Procurement.Group" label="Procurement Group" copy="false"
            help="Moves created through this orderpoint will be put in this procurement group. If none is given, the moves generated by stock rules will be grouped into one big picking." />
    <field name="CompanyId" type="Res.Company" label="Company" required="true" index="true" default="env.Company" />
    <field name="AllowedLocationIds" type="Stock.Location" collection="true" compute="ComputeAllowedLocationIds" />

    <field name="RuleIds" type="Stock.Rule" collection="true" string="Rules used" compute="ComputeRules" />
    <field name="LeadDaysDate" type="date" compute="ComputeLeadDays" />
    <field name="Route" type="Stock.Route" label="Route" domain="[('ProductSelectable', '=', True)]" />
    <field name="QtyOnHand" type="float" label="On Hand" readonly="true" compute="ComputeQty" digits="Product Unit of Measure" />
    <field name="QtyForecast" type="float" label="Forecast" readonly="true" compute="ComputeQty" digits="Product Unit of Measure" />
    <field name="QtyToOrder" type="float" label="To Order" compute="ComputeQtyToOrder" inverse="InverseQtyToOrder" search="SearchQtyToOrder" digits="Product Unit of Measure" />
    <field name="QtyToOrderComputed" type="float" label="To Order Computed" compute="ComputeQtyToOrderComputed" digits="Product Unit of Measure" />
    <field name="QtyToOrderManual" type="float" label="To Order Manual" digits="Product Unit of Measure" />

    <field name="DaysToOrder" type="float" compute="ComputeDaysToOrder" help="Numbers of days  in advance that replenishments demands are created." />
    <field name="VisibilityDays" type="float" compute="ComputeVisibilityDays" inverse="SetVisibilityDays" readonly="false"
            help="Consider product forecast these many days in the future upon product replenishment, set to 0 for just-in-time.\n The value depends on the type of the route (Buy or Manufacture)" />

    <field name="UnwantedReplenish" type="bool" label="Unwanted Replenish" compute="ComputeUnwantedReplenish" />

    <constraint name="QtyMultipleCheck" message="Qty Multiple must be greater than or equal to zero." condition="QtyMultiple >= 0" />
    <constraint name="ProductLocationCheck" message="A replenishment rule already exists for this product on this location." unique="Product, Location, CompanyId" />
  </model>
  <optionset id="Stock.OrderpointTrigger" name="Orderpoint Trigger">
    <option value="Auto" name="Auto" />
    <option value="Manual" name="Manual" />
  </optionset>
</buvi>
