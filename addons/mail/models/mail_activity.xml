xml
<buvi>
  <model id="Mail.MailActivity" name="MailActivity" description="Activity">
    <field name="ResModelId" type="Ir.Model" label="Document Model" required="true" />
    <field name="ResModel" type="string" label="Related Document Model" related="ResModelId.Model" readonly="true" />
    <field name="ResId" type="Many2oneReference" label="Related Document ID" modelField="ResModel" />
    <field name="ResName" type="string" label="Document Name" compute="ComputeResName" store="true" readonly="true" />
    <field name="ActivityTypeId" type="Mail.ActivityType" label="Activity Type" domain="['|', ('ResModel', '=', False), ('ResModel', '=', ResModel)]" />
    <field name="ActivityCategory" type="selection" related="ActivityTypeId.Category" readonly="true" />
    <field name="ActivityDecoration" type="selection" related="ActivityTypeId.DecorationType" readonly="true" />
    <field name="Icon" type="string" related="ActivityTypeId.Icon" readonly="true" />
    <field name="Summary" type="string" />
    <field name="Note" type="html" sanitizeStyle="true" />
    <field name="DateDeadline" type="date" label="Due Date" required="true" default="Date.ContextToday" />
    <field name="DateDone" type="date" label="Done Date" compute="ComputeDateDone" store="true" />
    <field name="Automated" type="bool" label="Automated activity" readonly="true"
        help="Indicates this activity has been created automatically and not by any user." />
    <field name="AttachmentIds" type="Many2many" collection="true" label="Attachments" />
    <field name="UserId" type="Res.Users" label="Assigned to" default="Env.User" required="true" />
    <field name="RequestPartnerId" type="Res.Partner" label="Requesting Partner" />
    <field name="State" type="selection" selection="['Overdue', 'Today', 'Planned', 'Done']" label="State" compute="ComputeState" />
    <field name="RecommendedActivityTypeId" type="Mail.ActivityType" label="Recommended Activity Type" />
    <field name="PreviousActivityTypeId" type="Mail.ActivityType" label="Previous Activity Type" readonly="true" />
    <field name="HasRecommendedActivities" type="bool" label="Next activities available" compute="ComputeHasRecommendedActivities" />
    <field name="MailTemplateIds" type="Many2many" collection="true" related="ActivityTypeId.MailTemplateIds" readonly="true" />
    <field name="ChainingType" type="selection" related="ActivityTypeId.ChainingType" readonly="true" />
    <field name="CanWrite" type="bool" compute="ComputeCanWrite" />
    <field name="Active" type="bool" default="true" />
    <unique>
      <field name="ResModel" />
      <field name="ResId" />
      <message>A tag with the same name and applicability already exists in this country.</message>
    </unique>
  </model>

  <optionset id="Mail.ActivityState" name="Activity State">
    <option value="Overdue" name="Overdue" />
    <option value="Today" name="Today" />
    <option value="Planned" name="Planned" />
    <option value="Done" name="Done" />
  </optionset>
</buvi>
