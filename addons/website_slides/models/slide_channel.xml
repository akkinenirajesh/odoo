xml
<buvi>
  <model id="WebsiteSlides.ChannelUsersRelation" name="ChannelUsersRelation" description="Channel / Partners (Members)">
    <field name="Active" type="bool" label="Active" default="true" />
    <field name="ChannelId" type="WebsiteSlides.Channel" label="Course" required="true" collection="true" />
    <field name="MemberStatus" type="selection" label="Attendee Status" readonly="true" required="true"
      default="Joined">
      <option value="Invited" name="Invite Sent" />
      <option value="Joined" name="Joined" />
      <option value="Ongoing" name="Ongoing" />
      <option value="Completed" name="Finished" />
    </field>
    <field name="Completion" type="integer" label="% Completed Contents" default="0" />
    <field name="CompletedSlidesCount" type="integer" label="# Completed Contents" default="0" />
    <field name="PartnerId" type="Core.Partner" required="true" collection="true" />
    <field name="PartnerEmail" type="string" related="PartnerId.Email" readonly="true" />
    <field name="ChannelUserId" type="Core.User" label="Responsible" related="ChannelId.UserId" />
    <field name="ChannelType" type="selection" related="ChannelId.ChannelType" />
    <field name="ChannelVisibility" type="selection" related="ChannelId.Visibility" />
    <field name="ChannelEnroll" type="selection" related="ChannelId.Enroll" />
    <field name="ChannelWebsiteId" type="Website.Website" label="Website" related="ChannelId.WebsiteId" />
    <field name="NextSlideId" type="WebsiteSlides.Slide" label="Next Lesson" compute="ComputeNextSlideId" />
    <field name="InvitationLink" type="string" label="Invitation Link" compute="ComputeInvitationLink" />
    <field name="LastInvitationDate" type="datetime" label="Last Invitation Date" />
    <unique>
      <field name="ChannelId" />
      <field name="PartnerId" />
      <message>A partner membership to a channel must be unique!</message>
    </unique>
    <constraint>
      <field name="Completion" />
      <message>The completion of a channel is a percentage and should be between 0% and 100.</message>
      <check>Completion >= 0 and Completion <= 100</check>
    </constraint>
  </model>

  <model id="WebsiteSlides.Channel" name="Channel" description="Course">
    <inherit id="Rating.Rating" />
    <inherit id="Mail.Activity" />
    <inherit id="Image.Mixin" />
    <inherit id="Website.CoverProperties" />
    <inherit id="Website.SeoMetadata" />
    <inherit id="Website.Published" />
    <inherit id="Website.Searchable" />
    <field name="Name" type="string" label="Name" required="true" translate="true" />
    <field name="Active" type="bool" default="true" />
    <field name="Description" type="html" label="Description" translate="true" />
    <field name="DescriptionShort" type="html" label="Short Description" translate="true" />
    <field name="DescriptionHtml" type="html" label="Detailed Description" translate="true" />
    <field name="ChannelType" type="selection" label="Course type" default="Training" required="true">
      <option value="Training" name="Training" />
      <option value="Documentation" name="Documentation" />
    </field>
    <field name="Sequence" type="integer" default="10" />
    <field name="UserId" type="Core.User" label="Responsible" />
    <field name="Color" type="integer" label="Color Index" default="0" />
    <field name="TagIds" type="WebsiteSlides.ChannelTag" label="Tags" collection="true" />
    <field name="SlideIds" type="WebsiteSlides.Slide" label="Slides and categories" collection="true" />
    <field name="SlideContentIds" type="WebsiteSlides.Slide" label="Content" compute="ComputeCategoryAndSlideIds" />
    <field name="SlideCategoryIds" type="WebsiteSlides.Slide" label="Categories" compute="ComputeCategoryAndSlideIds" />
    <field name="SlideLastUpdate" type="date" label="Last Update" compute="ComputeSlideLastUpdate" store="true" />
    <field name="SlidePartnerIds" type="WebsiteSlides.SlidePartner" label="Slide User Data" collection="true" />
    <field name="PromoteStrategy" type="selection" label="Featured Content" default="Latest"
      help="Defines the content that will be promoted on the course home page">
      <option value="Latest" name="Latest Created" />
      <option value="MostVoted" name="Most Voted" />
      <option value="MostViewed" name="Most Viewed" />
      <option value="Specific" name="Select Manually" />
      <option value="None" name="None" />
    </field>
    <field name="PromotedSlideId" type="WebsiteSlides.Slide" label="Promoted Slide" />
    <field name="AccessToken" type="string" label="Security Token" />
    <field name="NbrDocument" type="integer" label="Documents" compute="ComputeSlidesStatistics" store="true" />
    <field name="NbrVideo" type="integer" label="Videos" compute="ComputeSlidesStatistics" store="true" />
    <field name="NbrInfographic" type="integer" label="Infographics" compute="ComputeSlidesStatistics" store="true" />
    <field name="NbrArticle" type="integer" label="Articles" compute="ComputeSlidesStatistics" store="true" />
    <field name="NbrQuiz" type="integer" label="Number of Quizs" compute="ComputeSlidesStatistics" store="true" />
    <field name="TotalSlides" type="integer" label="Number of Contents" compute="ComputeSlidesStatistics" store="true" />
    <field name="TotalViews" type="integer" label="Visits" compute="ComputeSlidesStatistics" store="true" />
    <field name="TotalVotes" type="integer" label="Votes" compute="ComputeSlidesStatistics" store="true" />
    <field name="TotalTime" type="float" label="Duration" compute="ComputeSlidesStatistics" store="true" />
    <field name="RatingAvgStars" type="float" label="Rating Average (Stars)" compute="ComputeRatingStats" />
    <field name="AllowComment" type="bool" label="Allow rating on Course" default="true" />
    <field name="PublishTemplateId" type="Mail.Template" label="New Content Notification" />
    <field name="ShareChannelTemplateId" type="Mail.Template" label="Channel Share Template" />
    <field name="ShareSlideTemplateId" type="Mail.Template" label="Share Template" />
    <field name="CompletedTemplateId" type="Mail.Template" label="Completion Notification" />
    <field name="Enroll" type="selection" label="Enroll Policy" default="Public" required="true"
      compute="ComputeEnroll" store="true" readonly="false"
      help="Defines how people can enroll to your Course.">
      <option value="Public" name="Open" />
      <option value="Invite" name="On Invitation" />
    </field>
    <field name="EnrollMsg" type="html" label="Enroll Message" />
    <field name="EnrollGroupIds" type="Core.Group" label="Auto Enroll Groups" collection="true" />
    <field name="Visibility" type="selection" label="Show Course To" default="Public" required="true"
      help="Defines who can access your courses and their content.">
      <option value="Public" name="Everyone" />
      <option value="Connected" name="Signed In" />
      <option value="Members" name="Course Attendees" />
    </field>
    <field name="UploadGroupIds" type="Core.Group" label="Upload Groups" collection="true" />
    <field name="WebsiteDefaultBackgroundImageUrl" type="string" label="Background image URL"
      compute="ComputeWebsiteDefaultBackgroundImageUrl" />
    <field name="ChannelPartnerIds" type="WebsiteSlides.ChannelUsersRelation" label="Enrolled Attendees Information"
      collection="true" />
    <field name="ChannelPartnerAllIds" type="WebsiteSlides.ChannelUsersRelation" label="All Attendees Information"
      collection="true" />
    <field name="MembersCount" type="integer" label="# Enrolled Attendees" compute="ComputeMembersCounts" />
    <field name="MembersAllCount" type="integer" label="# Enrolled or Invited Attendees" compute="ComputeMembersCounts" />
    <field name="MembersEngagedCount" type="integer" label="# Active Attendees"
      help="Active attendees include both 'joined' and 'ongoing' attendees." compute="ComputeMembersCounts" />
    <field name="MembersCompletedCount" type="integer" label="# Completed Attendees" compute="ComputeMembersCounts" />
    <field name="MembersInvitedCount" type="integer" label="# Invited Attendees" compute="ComputeMembersCounts" />
    <field name="PartnerIds" type="Core.Partner" label="Attendees" compute="ComputePartners" search="SearchPartnerIds" />
    <field name="Completed" type="bool" label="Done" compute="ComputeUserStatistics" />
    <field name="Completion" type="integer" label="Completion" compute="ComputeUserStatistics" />
    <field name="CanUpload" type="bool" label="Can Upload" compute="ComputeCanUpload" />
    <field name="HasRequestedAccess" type="bool" label="Access Requested" compute="ComputeHasRequestedAccess" />
    <field name="IsMember" type="bool" label="Is Enrolled Attendee" compute="ComputeMembershipValues" search="SearchIsMember" />
    <field name="IsMemberInvited" type="bool" label="Is Invited Attendee" compute="ComputeMembershipValues"
      search="SearchIsMemberInvited" />
    <field name="PartnerHasNewContent" type="bool" compute="ComputePartnerHasNewContent" />
    <field name="KarmaGenChannelRank" type="integer" label="Course ranked" default="5" />
    <field name="KarmaGenChannelFinish" type="integer" label="Course finished" default="10" />
    <field name="KarmaReview" type="integer" label="Add Review" default="10" />
    <field name="KarmaSlideComment" type="integer" label="Add Comment" default="3" />
    <field name="KarmaSlideVote" type="integer" label="Vote" default="3" />
    <field name="CanReview" type="bool" label="Can Review" compute="ComputeActionRights" />
    <field name="CanComment" type="bool" label="Can Comment" compute="ComputeActionRights" />
    <field name="CanVote" type="bool" label="Can Vote" compute="ComputeActionRights" />
    <field name="PrerequisiteChannelIds" type="WebsiteSlides.Channel" label="Prerequisites" collection="true" />
    <field name="PrerequisiteOfChannelIds" type="WebsiteSlides.Channel" label="Prerequisite Of" collection="true" />
    <field name="PrerequisiteUserHasCompleted" type="bool" label="Has Completed Prerequisite"
      compute="ComputePrerequisiteUserHasCompleted" />
    <constraint>
      <message>The Enroll Policy should be set to 'On Invitation' when visibility is set to 'Course Attendees'</message>
      <check>Visibility != 'Members' OR Enroll = 'Invite'</check>
    </constraint>
  </model>
  <optionset id="WebsiteSlides.ChannelVisibility" name="Channel Visibility">
    <option value="Public" name="Everyone" />
    <option value="Connected" name="Signed In" />
    <option value="Members" name="Course Attendees" />
  </optionset>
  <optionset id="WebsiteSlides.ChannelEnroll" name="Channel Enroll">
    <option value="Public" name="Open" />
    <option value="Invite" name="On Invitation" />
  </optionset>
  <optionset id="WebsiteSlides.PromoteStrategy" name="Promote Strategy">
    <option value="Latest" name="Latest Created" />
    <option value="MostVoted" name="Most Voted" />
    <option value="MostViewed" name="Most Viewed" />
    <option value="Specific" name="Select Manually" />
    <option value="None" name="None" />
  </optionset>
  <optionset id="WebsiteSlides.ChannelType" name="Channel Type">
    <option value="Training" name="Training" />
    <option value="Documentation" name="Documentation" />
  </optionset>
  <optionset id="WebsiteSlides.MemberStatus" name="Member Status">
    <option value="Invited" name="Invite Sent" />
    <option value="Joined" name="Joined" />
    <option value="Ongoing" name="Ongoing" />
    <option value="Completed" name="Finished" />
  </optionset>
</buvi>
